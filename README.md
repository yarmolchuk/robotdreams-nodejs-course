# RobotDreams NestJS Project

## Опис проєкту

Серверний додаток на базі NestJS framework. Проєкт побудований з використанням модульної архітектури, що забезпечує масштабованість, легкість тестування та підтримки коду.

---

## Архітектура проєкту

### Загальний огляд

Проєкт базується на **модульній архітектурі NestJS**, яка є реалізацією патерну **Modular Monolith**. Цей підхід поєднує простоту моноліту з організаційними перевагами мікросервісів.

```
┌─────────────────────────────────────────────────────────┐
│                      Application                        │
├─────────────────────────────────────────────────────────┤
│                       AppModule                         │
│  ┌─────────────────┐  ┌─────────────────────────────┐   │
│  │  ConfigModule   │  │        UsersModule          │   │
│  │  (глобальний)   │  │  ┌──────────┐ ┌───────────┐ │   │
│  │                 │  │  │Controller│ │  Service  │ │   │
│  │  .local.env     │  │  └──────────┘ └───────────┘ │   │
│  │  .dev.env       │  │                             │   │
│  │  .prod.env      │  │                             │   │
│  └─────────────────┘  └─────────────────────────────┘   │
├─────────────────────────────────────────────────────────┤
│                    NestJS Core                          │
├─────────────────────────────────────────────────────────┤
│                   Express / Node.js                     │
└─────────────────────────────────────────────────────────┘
```

### Структура проєкту

```
src/
├── main.ts                 # Точка входу в додаток
├── app.module.ts           # Кореневий модуль
├── app.controller.ts       # Кореневий контролер
├── app.service.ts          # Кореневий сервіс
└── users/                  # Feature-модуль користувачів
    ├── users.module.ts     # Модуль користувачів
    ├── users.controller.ts # Контролер (HTTP endpoints)
    └── users.service.ts    # Бізнес-логіка
```

---

## Архітектурні рішення

### 1. Модульна структура

**Чому саме так:**

- **Інкапсуляція** — кожен модуль містить власні контролери, сервіси та залежності
- **Незалежність** — модулі можна розробляти, тестувати та деплоїти незалежно
- **Масштабованість** — легко додавати нові feature-модулі без впливу на існуючі
- **Перевикористання** — модулі можна експортувати та імпортувати в інші частини додатку

```typescript
// Приклад підключення модуля
@Module({
  imports: [ConfigModule, UsersModule],
  controllers: [AppController],
  providers: [AppService],
})
export class AppModule {}
```

### 2. Шаруватість (Layered Architecture)

Кожен модуль дотримується трирівневої архітектури:

| Шар.           | Відповідальність                               | Файл              |
|----------------|------------------------------------------------|-------------------|
| **Controller** | HTTP запити/відповіді, валідація вхідних даних | `*.controller.ts` |
| **Service**    | Бізнес-логіка, обробка даних                   | `*.service.ts`    |
| **Module**     | Конфігурація залежностей, DI контейнер         | `*.module.ts`     |

**Чому саме так:**

- **Separation of Concerns** — чіткий розподіл відповідальності
- **Тестованість** — легко мокати залежності на кожному рівні
- **Підтримуваність** — зміни в одному шарі не впливають на інші

### 3. Dependency Injection (DI)

NestJS використовує вбудований IoC-контейнер для управління залежностями:

```typescript
@Controller('users')
export class UsersController {
  // Сервіс інжектується автоматично
  constructor(private readonly usersService: UsersService) {}
}
```

**Чому саме так:**

- **Loose Coupling** — класи не створюють залежності самостійно
- **Тестованість** — легко підміняти реальні сервіси на моки
- **Гнучкість** — можна змінювати реалізації без зміни споживачів

### 4. Конфігурація середовища

Проєкт підтримує три середовища з окремими конфігураціями:

| Середовище  | Файл         | Порт | Команда               |
|-------------|--------------|------|-----------------------|
| Local       | `.local.env` | 5000 | `npm run start:local` |
| Development | `.dev.env`   | 3000 | `npm run start:dev`   |
| Production  | `.prod.env`  | 2026 | `npm run start:prod`  |

**Чому саме так:**

- **Безпека** — конфігурації не потрапляють в git (`.gitignore`)
- **Гнучкість** — різні налаштування для різних середовищ
- **12-Factor App** — дотримання принципу "Store config in environment"

```typescript
// Динамічне завантаження конфігурації
ConfigModule.forRoot({
  envFilePath: `.${process.env.NODE_ENV}.env`,
})
```

---

## Потік даних

```
HTTP Request
     │
     ▼
┌─────────────┐
│  Controller │ ← Приймає запит, валідує дані
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Service   │ ← Виконує бізнес-логіку
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  Repository │ ← Робота з БД (буде додано)
└──────┬──────┘
       │
       ▼
HTTP Response
```

---

## Запуск проєкту

### Встановлення залежностей

```bash
npm install
```

### Створення env файлів

```bash
# .local.env
PORT=5000

# .dev.env
PORT=3000

# .prod.env
PORT=2026
```

### Запуск

```bash
# Локальне середовище (з hot-reload)
npm run start:local

# Development середовище (з hot-reload)
npm run start:dev

# Production
npm run build
npm run start:prod
```

---

## Технології

- **Runtime:** Node.js
- **Framework:** NestJS 11
- **Language:** TypeScript 5
- **Configuration:** @nestjs/config
- **Package Manager:** npm
